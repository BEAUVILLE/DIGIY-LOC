<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>DIGIY LOC ‚ôæÔ∏è ‚Äî Trouve ta location</title>

<style>
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:linear-gradient(135deg,#022c22,#065f46);
  color:#f9fafb;
}
.wrap{max-width:1100px;margin:auto;padding:16px}
h1{margin:8px 0 4px}
.sub{color:#cbd5f5;font-size:14px;margin-bottom:10px}

.top-btns{
  display:flex;gap:10px;flex-wrap:wrap;margin-bottom:16px
}
.top-btns a{
  padding:10px 14px;border-radius:999px;
  font-weight:800;font-size:14px;text-decoration:none;
  background:#facc15;color:#022c22
}

.showcase{
  background:#020617;
  border-radius:18px;padding:14px;margin-bottom:16px
}
.showcase strong{color:#facc15}

.search{
  background:#020617;border-radius:18px;padding:14px;margin-bottom:14px;
  display:grid;grid-template-columns:1fr 1fr 1fr auto;gap:10px
}
input,select{
  padding:10px;border-radius:12px;border:1px solid #1f2937;
  background:#020617;color:#f9fafb
}
button{
  padding:10px 14px;border-radius:12px;border:none;
  background:#facc15;font-weight:900;cursor:pointer
}

.grid{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px
}
.card{
  background:#020617;border-radius:16px;padding:12px;border:1px solid #1f2937
}
.card h3{margin:0 0 6px}
.price{color:#facc15;font-weight:900}

</style>
</head>
<body>
<div class="wrap">

<h1>DIGIY LOC ‚ôæÔ∏è</h1>
<div class="sub">
Trouve une location rapide. Contact direct. 0% commission.
</div>

<div class="top-btns">
<a href="https://beauville.github.io/inscription-digiy/" target="_blank">üè† Je suis propri√©taire</a>
<a href="https://wa.me/221771342889" target="_blank">üì≤ Parler √† l‚Äô√©quipe</a>
</div>

<div class="showcase">
‚≠ê <strong>Vitrine du jour</strong><br>
Chez Astou Saly ‚Äî propre, accueil chaleureux, contact direct.<br><br>
<a href="https://beauville.github.io/digiy-loc-pro/go-pin.html?slug=chez-astou-saly"
   style="color:#22c55e;font-weight:900;text-decoration:none">
üëÄ Voir la fiche Chez Astou
</a>
</div>

<div class="search">
<input id="q" placeholder="Zone (Saly, Dakar...)"/>
<select id="kind">
<option value="">Tout</option>
<option value="villa">Villa</option>
<option value="appartement">Appartement</option>
<option value="studio">Studio</option>
</select>
<input id="maxPrice" type="number" placeholder="Budget nuit"/>
<button id="btnSearch">Chercher</button>
</div>

<div id="grid" class="grid"></div>

</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const sb = supabase.createClient(
"https://wesqmwjjtsefyjnluosj.supabase.co",
"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indlc3Ftd2pqdHNlZnlqbmx1b3NqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUxNzg4ODIsImV4cCI6MjA4MDc1NDg4Mn0.dZfYOc2i"
);

const grid = document.getElementById("grid");

async function load(){
grid.innerHTML="Chargement...";
const {data}=await sb.from("go_pins").select("*").eq("module","loc");

grid.innerHTML=data.map(p=>{
const price = p.price_per_night ? p.price_per_night.toLocaleString("fr-FR")+" F" : "Prix √† voir";
return `
<div class="card">
<h3>${p.title}</h3>
<div>${p.city||""}</div>
<div class="price">${price}</div><br>
<a href="https://beauville.github.io/digiy-loc-pro/go-pin.html?slug=${p.slug}"
   style="color:#22c55e;font-weight:900;text-decoration:none">
Voir le PIN
</a>
</div>`;
}).join("");
}

document.getElementById("btnSearch").onclick=load;
load();
</script>
</body>
</html>
